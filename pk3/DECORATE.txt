#include "actors/weapons.txt"
#include "actors/puffs.txt"
#include "actors/tracer.txt"

actor GhostCustomBridge : CustomBridge Replaces CustomBridge
{
	+NONSHOOTABLE
}

actor GhostInvisibleBridge : InvisibleBridge Replaces InvisibleBridge
{
	+NONSHOOTABLE
}

actor GhostInvisibleBridge8 : InvisibleBridge8 Replaces InvisibleBridge8
{
	+NONSHOOTABLE
}

actor GhostInvisibleBridge16 : InvisibleBridge16 Replaces InvisibleBridge16
{
	+NONSHOOTABLE
}

actor GhostInvisibleBridge32 : InvisibleBridge32 Replaces InvisibleBridge32
{
	+NONSHOOTABLE
}

actor GhostBridge : Bridge Replaces Bridge
{
	+NONSHOOTABLE
}

actor GhostZBridge : ZBridge Replaces ZBridge
{
	+NONSHOOTABLE
}

actor DamageDummy : PowerupGiver
{
  inventory.pickupmessage ""
  inventory.defmaxamount
  inventory.maxamount 0
  powerup.duration 48
  powerup.type "Frightener"
  +INVENTORY.AUTOACTIVATE
  +INVENTORY.ALWAYSPICKUP
  states
  {
  Spawn:
    TNT1 A 3
    loop
  }
}

actor Detonator : Inventory
{
  inventory.amount 1
  inventory.maxamount 1
  -INVBAR
  -INTERHUBSTRIP
  +INVENTORY.UNDROPPABLE
  +INVENTORY.HUBPOWER
  states
  {
  Spawn:
	TNT1 A 1
	loop
  }
}

actor RespawnCheck : Inventory
{
  inventory.amount 1
  inventory.maxamount 1
  -INVBAR
  -INTERHUBSTRIP
  +INVENTORY.UNDROPPABLE
  +INVENTORY.HUBPOWER
  states
  {
  Spawn:
	TNT1 A 1
	loop
  }
}

actor PaintBallMode : PowerupGiver
{
  inventory.pickupmessage ""
  inventory.defmaxamount
  inventory.maxamount 0
  powerup.duration 9999999999
  powerup.type "WeaponLevel2"
  +INVENTORY.AUTOACTIVATE
  +INVENTORY.ALWAYSPICKUP
  states
  {
  Spawn:
    TNT1 A 3
    loop
  }
}

actor HitSpark
{
	RenderStyle Add
	Alpha 0.9
	Scale 0.15
	Radius 1
	Height 1
	+NOBLOCKMAP
	+NOCLIP
	+NOGRAVITY
	States
	{
		Spawn:
			SPRK ABCDE 1 bright
			stop
	}
}

ACTOR ShotgunCartridges : Ammo Replaces Shell
{
  Inventory.PickupMessage "Picked up some Shotgun Cartridges"
  Inventory.Amount 5
  Inventory.MaxAmount 50
  Ammo.BackpackAmount 5
  Ammo.BackpackMaxAmount 100
  Inventory.Icon "SHELA0"
  States
  {
  Spawn:
    SHEL A -1
    Stop
  }
}

ACTOR LargeShotgunCartridges : ShotgunCartridges Replaces ShellBox
{
	Inventory.Amount 15
}

ACTOR GrenadeRounds : Ammo Replaces RocketAmmo
{
  Inventory.PickupMessage "Picked up some Grenade Rounds"
  Inventory.Amount 6
  Inventory.MaxAmount 12
  Ammo.BackpackAmount 1
  Ammo.BackpackMaxAmount 24
  Inventory.Icon "ROCKA0"
  States
  {
  Spawn:
    ROCK A -1
    stop
  }
}

ACTOR Rockets : Ammo Replaces RocketBox
{
  Inventory.PickupMessage "Picked up some Rockets"
  Inventory.Amount 3
  Inventory.MaxAmount 3
  Ammo.BackpackAmount 1
  Ammo.BackpackMaxAmount 6
  Inventory.Icon "ROCKA0"
  States
  {
  Spawn:
    ROCK A -1
    stop
  }
}

ACTOR 9mmBullets : Ammo Replaces Clip
{
  Inventory.PickupMessage "Picked up some Ammo"
  Inventory.Amount 14
  Inventory.MaxAmount 200
  Ammo.BackpackAmount 14
  Ammo.BackpackMaxAmount 400
  Inventory.Icon "CLIPA0"
  States
  {
  Spawn:
    CLIP A -1
    Stop
  }
}

actor Large9mmBullets : 9mmBullets replaces ClipBox
{
  Game Doom
  SpawnID 139
  Inventory.PickupMessage "Picked up some Ammo"
  Inventory.Amount 42
  States
  {
  Spawn:
    CLIP A -1
    Stop
  }
}

actor JamesBond : DoomPlayer Replaces DoomPlayer
{
	-CANNOTPUSH
	player.forwardmove 0.64
	player.sidemove 0.64
	player.startitem PP7
	player.startitem HuntingKnife
	player.startitem ThrowingKnives
	player.startitem Knives 1
	player.startitem 9mmBullets 42
	States
	{
	Death:
		PLAY H 7 A_GiveInventory("Detonator", 1)
		PLAY I 7 A_PlayerScream
		PLAY J 7 A_NoBlocking
		PLAY K 0 A_TakeInventory("Detonator", 999)
		PLAY KLM 6
		PLAY N -1
		Stop
	Death.Rocket:
		PLAY A 0 A_Recoil(Random(8, 15))
		PLAY A 0 ThrustThingZ(0, Random(48,60), 0, 0)
		PLAY H 7 A_GiveInventory("Detonator", 1)
		PLAY I 7 A_PlayerScream
		PLAY J 7 A_NoBlocking
		PLAY K 0 A_TakeInventory("Detonator", 999)
		PLAY KLM 6
		PLAY N -1
		Stop
	Death.Grenade:
		PLAY A 0 A_Recoil(Random(5, 10))
		PLAY A 0 ThrustThingZ(0, Random(38,48), 0, 0)
		PLAY H 7 A_GiveInventory("Detonator", 1)
		PLAY I 7 A_PlayerScream
		PLAY J 7 A_NoBlocking
		PLAY K 0 A_TakeInventory("Detonator", 999)
		PLAY KLM 6
		PLAY N -1
		Stop
	Pain:
		PLAY G 0 ACS_Execute(996, 0)
    	PLAY G 4 A_GiveInventory("DamageDummy", 1)
    	PLAY G 4 A_Pain
    	Goto Spawn
	Pain.Taze:
		PLAY G 0 A_GiveInventory("DamageDummy", 1)
		PLAY G 0 A_Pain
		PLAY G 0 A_SetBlend("FF FF FF", 0.9, 28)
		PLAY G 1 ACS_ExecuteAlways(888, 0)
		goto See
	}
}

actor BulletCasing
{
  Projectile
  Radius 1
  Height 1
  Speed 9
  Scale 0.1
  BounceCount 2
  BounceFactor 0.5
  ReactionTime 200
  SeeSound "BulletCasing"
  DeathSound "Bulletcasing"
  -NOGRAVITY
  +HEXENBOUNCE
  +DONTSPLASH
  -ACTIVATEMCROSS
  -ACTIVATEPCROSS
  -ACTIVATEIMPACT
  States
  {
   Spawn:
	TNT1 A 0
	TNT1 A 0 A_StopSound
	BCAS ABCDEFGH 1 A_CountDown
	goto Spawn+2
   Death:
	TNT1 A 0 A_Scream
	TNT1 A 0
	stop
  }
}

actor PointedBulletCasing
{
  Projectile
  Radius 1
  Height 1
  Speed 9
  Scale 0.04
  BounceCount 2
  BounceFactor 0.5
  ReactionTime 200
  SeeSound "BulletCasing"
  DeathSound "Bulletcasing"
  -NOGRAVITY
  +HEXENBOUNCE
  +DONTSPLASH
  -ACTIVATEMCROSS
  -ACTIVATEPCROSS
  -ACTIVATEIMPACT
  States
  {
   Spawn:
	TNT1 A 0
	TNT1 A 0 A_StopSound
	PCAS ABCDEFGH 1 A_CountDown
	goto Spawn+2
   Death:
	TNT1 A 0 A_Scream
	TNT1 A 0
	stop
  }
}

actor ShellCasing
{
  Projectile
  Radius 1
  Height 1
  Speed 9
  Scale 0.2
  BounceCount 2
  BounceFactor 0.5
  ReactionTime 200
  SeeSound "BulletCasing"
  DeathSound "Shellcasing"
  -NOGRAVITY
  +HEXENBOUNCE
  +DONTSPLASH
  -ACTIVATEMCROSS
  -ACTIVATEPCROSS
  -ACTIVATEIMPACT
  States
  {
   Spawn:
	TNT1 A 0
	TNT1 A 0 A_StopSound
	SHE2 ABCDEF 1 A_CountDown
	goto Spawn+2
   Death:
	TNT1 A 0 A_Scream
	TNT1 A 0
	stop
  }
}

actor MunitionsBox : ExplosiveBarrel Replaces ExplosiveBarrel
{
  spawnid 125
  obituary "%o went boom."
  health 50
  radius 10
  height 34
  deathsound "world/barrelx"
  Mass 999999
  +SOLID
  +SHOOTABLE
  +NOBLOOD
  +DONTGIB
  +NOICEDEATH
  +NOTAUTOAIMED
  states
  {
  Spawn:
	BAR1 A -1
	loop
  Death:
	BAR1 A 2
	TNT1 A 0 bright A_Scream
	TNT1 A 0 bright A_Explode(64, 128, 0)
	TNT1 A 0 A_Fall
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion", 0, 0, 0, 0, 0, 0, 0, 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 AAAAAAA 5 A_SpawnItemEx ("RollingExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	NULL A 2100 A_BarrelDestroy
	NULL A 5 A_Respawn
	Wait
  }
}

actor RollingExplosion
{
  Radius 1
  Height 1
  Speed 0
  RenderStyle Translucent
  Scale 1.32
  -SOLID
  +NOGRAVITY
  +NODAMAGETHRUST
  +FORCEXYBILLBOARD
  States
  {
  Spawn:
   FIR2 ABCDEFGH 2 BRIGHT A_Explode(16, 76, 1)
   FIR2 IJKLMN 2 BRIGHT
   stop
  }
}


ACTOR GoldenBullet : Ammo Replaces Cell
{
	Game Doom
	SpawnID 75
	Inventory.PickupMessage "Picked up a Golden Bullet"
	Inventory.Amount 1
	Inventory.MaxAmount 10
	Ammo.BackpackAmount 2
	Ammo.BackpackMaxAmount 20
	Inventory.Icon "GBULLET"
	States
	{
	Spawn:
		CELL A -1
		Stop
	}
}

actor RollingExplosion3
{
  Radius 1
  Height 1
  Speed 0
  obituary "%o almost Dodged %k's rocket."
  Scale 1.32
  RenderStyle Translucent
  Alpha 0.9
  -SOLID
  +NOGRAVITY
  +NODAMAGETHRUST
  +FORCERADIUSDMG
  +FORCEXYBILLBOARD
  States
  {
  Spawn:
   FIR2 ABCDEFGH 2 BRIGHT A_Explode(16, 76, 1)
   FIR2 IJKLMN 2 BRIGHT
   stop
  }
}

actor GE64RocketTrail
{
  Projectile
  Radius 1
  Height 1
  Damage 0
  Speed 0
  Scale 0.1
  RenderStyle Translucent
  Alpha 0.5
  +NOCLIP
  States
  {
   Spawn:
   TNT1 A 0
   TNT1 A 2
   SMOK ABCDEFGHIJKLMNOPQ 2
   stop
  }
}

actor ExplosionSmoke
{
  Projectile
  Radius 1
  Height 1
  Damage 0
  Speed 0
  Scale 0.8
  RenderStyle Translucent
  Alpha 0.3
  +NOCLIP
  +FORCEXYBILLBOARD
  States
  {
   Spawn:
   SMO2 ABCDEFGHIJKLMNOPQ 10
   stop
  }
}

actor GE64Rocket : Rocket Replaces Rocket
{
  spawnid 127
  obituary "%k shoved a rocket up %o's Ass."
  radius 8
  height 8
  speed 6
  damage (60)
  DamageType Rocket
  seesound "weapons/rocklf"
  deathsound "weapons/rocklx"
  Decal BigScorch
  Gravity 0.02
  PROJECTILE
  -NOGRAVITY
  +RANDOMIZE
  -ROCKETTRAIL
  states
  {
  Spawn:
	MISL A 0
	MISL A 0 Thing_ChangeTID(0, 255)
	MISL A 0 A_ScaleVelocity(1.1)
	MISL A 1 A_SpawnItemEx("GE64RocketTrail", Random(-4,4), Random(-4,4), Random(-4,4), 0, 0, 0, 0, 128, 0)
	goto Spawn+2
  Death:
	MISL B 0 bright A_Explode
	TNT1 A 0 radius_quake(2, 10, 0, 3, 0)
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris1", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(-5, 5), Random(-5, 5), Random(-6, 7), Random(-360, 360), 128, 24)
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris2", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(-5, 5), Random(-5, 5), Random(-6, 7), Random(-360, 360), 128, 24)
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris3", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(-5, 5), Random(-5, 5), Random(-6, 7), Random(-360, 360), 128, 24)
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris4", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(-5, 5), Random(-5, 5), Random(-6, 7), Random(-360, 360), 128, 24)
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris5", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(-5, 5), Random(-5, 5), Random(-6, 7), Random(-360, 360), 128, 24)
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris1", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(-3, 3), Random(-3, 3), Random(1, 6), Random(-360, 360), 128, 24)
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris2", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(-3, 3), Random(-3, 3), Random(1, 6), Random(-360, 360), 128, 24)
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris3", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(-3, 3), Random(-3, 3), Random(1, 6), Random(-360, 360), 128, 24)
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris4", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(-3, 3), Random(-3, 3), Random(1, 6), Random(-360, 360), 128, 24)
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris5", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(-3, 3), Random(-3, 3), Random(1, 6), Random(-360, 360), 128, 24)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion3", 0, 0, 0, 0, 0, 0, 0, 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion3", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion3", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion3", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion3", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion3", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion3", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion3", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion3", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion3", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 AAAAAAA 5 A_SpawnItemEx ("RollingExplosion3", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	stop
  }
}

actor LaserTrail
{
  Projectile
  Speed 1
  Radius 4
  Height 4
  Damage 0
  RenderStyle Add
  Alpha 0.75
  Scale 0.5
  +NOGRAVITY
  States
  {
  Spawn:
   PLSS AB 1 BRIGHT A_Fadeout
   loop
  Death:
   TNT1 A 1
   stop
  }
}

actor LaserSpark
{
  renderstyle Add
  alpha 0.9
  +NOBLOCKMAP
  +NOGRAVITY
  -ALLOWPARTICLES
  +DONTSPLASH
  +FORCEXYBILLBOARD
  Scale 0.17
  states
  {
  Spawn:
	SPRK A 0
	SPRK A 0 A_SpawnItemEx("BulletSmoke", 0, 0, 0, 0, 0, 0, 0, 128, 0)
	SPRK A 0 A_SpawnItemEx("BulletHeat", 0, 0, 0, 0, 0, 0, 0, 128, 64)
	SPRK AAA 0 A_SpawnItemEx("Debris1", 0, 0, 0, Random(-1, 1), Random(-1, 1), Random(0, 2), Random(-360, 360), 128, 164)
	SPRK AAA 0 A_SpawnItemEx("Debris2", 0, 0, 0, Random(-1, 1), Random(-1, 1), Random(0, 2), Random(-360, 360), 128, 164)
	SPRK AAA 0 A_SpawnItemEx("Debris3", 0, 0, 0, Random(-1, 1), Random(-1, 1), Random(0, 2), Random(-360, 360), 128, 164)
	SPRK AAA 0 A_SpawnItemEx("Debris4", 0, 0, 0, Random(-1, 1), Random(-1, 1), Random(0, 2), Random(-360, 360), 128, 164)
	SPRK A 0 A_SpawnItemEx("Debris5", 0, 0, 0, Random(-1, 1), Random(-1, 1), Random(0, 2), Random(-360, 360), 128, 164)
	SPRK A 0 A_Jump(127, "Spawn2", "Spawn3", "Spawn4")
	SPRK ABCDE 1 bright
	stop
  Spawn2:
  	SPR2 ABCDE 1 bright
	stop
  Spawn3:
  	SPR3 ABCDE 1 bright
	stop
  Spawn4:
  	SPR4 ABCDE 1 bright
	stop
  Melee:
	PUFF CD 4
	stop
  }
}

ACTOR LaserBeam : FastProjectile Replaces PlasmaBall
{
	Decal BulletChip
	Game Doom
	SpawnID 51
	Radius 4
	Height 4
	Speed 100
	Damage (5)
	Projectile
	+RANDOMIZE
	+STRIFEDAMAGE
	+RIPPER
	+THRUGHOST
	RenderStyle Add
	Alpha 1.0
	Scale 0.5
	DeathSound "weapons/plasmax"
	Obituary "%o was fried by %k's laser."
	States
	{
	Spawn:
		PLSS AB 1 Bright A_SpawnItemEx("LaserTrail", 0, 0, 0, 0, 0, 0, 0, 128, 0)
		Loop
	Death:
	Crash:
		TNT1 A 0
		TNT1 A 1 A_SpawnItemEx("LaserSpark", 0, 0, 0, 0, 0, 0, 0, 128, 0)
		Stop
	XDeath:
		TNT1 A 0
		TNT1 A 1 A_SpawnItemEx("HitSpark", 0, 0, 0, 0, 0, 0, 0, 128, 0)
		Stop
	}
}

ACTOR MagnumBullets : Ammo Replaces CellPack
{
	Game Doom
	SpawnID 142
	Inventory.PickupMessage "Picked up some Magnum Bullets."
	Inventory.Amount 6
	Inventory.MaxAmount 100
	Ammo.BackpackAmount 6
	Ammo.BackpackMaxAmount 200
	Inventory.Icon "MAGBA0"
	States
	{
	Spawn:
		MAGB A -1
		Stop
	}
}

actor IrisTrail
{
 Radius 8
 Height 8
 Speed 0
 PROJECTILE
 States
 {
 Spawn:
   IRIS A 20
   stop
 Death:
   TNT1 A 0
   stop
 }
}

actor Iris
{
  Radius 8
  Height 8
  Speed 3
  SpawnID 255
  PROJECTILE
  States
  {
  Spawn:
	IRIS A 20 A_CustomMissile("IrisTrail", 0, 0, 0)
	loop
  Death:
	TNT1 A 0 ACS_Execute(2, 0)
	stop
  }
}

actor RollingExplosion2
{
  Radius 1
  Height 1
  Speed 0
  Scale 1.25
  Obituary "%o was engulfed by the flames from %k's grenade."
  RenderStyle Translucent
  Alpha 0.9
  -SOLID
  +NOGRAVITY
  +NODAMAGETHRUST
  +FORCEXYBILLBOARD
  States
  {
  Spawn:
   FIR2 ABCDEFGH 2 BRIGHT A_Explode(10, 56, 1)
   FIR2 IJKLMN 2 BRIGHT
   stop
  }
}

actor ExplosionSmoke2
{
  Projectile
  Radius 1
  Height 1
  Damage 0
  Speed 0
  Scale 0.6
  RenderStyle Translucent
  Alpha 0.3
  +NOCLIP
  +FORCEXYBILLBOARD
  States
  {
   Spawn:
   SMO2 ABCDEFGHIJKLMNOPQ 10
   stop
  }
}

actor GE64GrenadeTrail
{
  Projectile
  Radius 1
  Height 1
  Damage 0
  Speed 0
  Scale 0.08
  RenderStyle Add
  Alpha 0.6
  +NOCLIP
  States
  {
   Spawn:
   TNT1 A 0
   TNT1 A 2
   SMOK ABCDEFGHIJKLMNOPQ 1
   stop
  }
}

actor GE64Grenade Replaces Grenade
{
  Radius 8
  Height 8
  PROJECTILE
  Speed 25
  Damage (40)
  BounceCount 3
  BounceFactor 0.5
  Gravity 0.6
  DamageType Grenade
  BounceType Hexen
  -NOGRAVITY
  BounceSound "weapons/grbnce"
  States
  {
  Spawn:
	SGRN A 1 A_SpawnItemEx("GE64GrenadeTrail", Random(-2,2), Random(-2,2), Random(-2,2), 0, 0, 0, 0, 128, 0)
	loop
  Death:
	MISL B 0 bright A_Explode(64, 128, 1)
	MISL B 0 A_NoGravity
	TNT1 A 0 radius_quake(2, 10, 0, 3, 0)
	TNT1 A 0 A_PlaySoundEx("world/barrelx", "Auto", 0)
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris1", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(-5, 5), Random(-5, 5), Random(-6, 7), Random(-360, 360), 128, 24)
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris2", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(-5, 5), Random(-5, 5), Random(-6, 7), Random(-360, 360), 128, 24)
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris3", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(-5, 5), Random(-5, 5), Random(-6, 7), Random(-360, 360), 128, 24)
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris4", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(-5, 5), Random(-5, 5), Random(-6, 7), Random(-360, 360), 128, 24)
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris5", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(-5, 5), Random(-5, 5), Random(-6, 7), Random(-360, 360), 128, 24)
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris1", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(-3, 3), Random(-3, 3), Random(1, 6), Random(-360, 360), 128, 24)
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris2", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(-3, 3), Random(-3, 3), Random(1, 6), Random(-360, 360), 128, 24)
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris3", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(-3, 3), Random(-3, 3), Random(1, 6), Random(-360, 360), 128, 24)
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris4", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(-3, 3), Random(-3, 3), Random(1, 6), Random(-360, 360), 128, 24)
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris5", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(-3, 3), Random(-3, 3), Random(1, 6), Random(-360, 360), 128, 24)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion2", 0, 0, 0, 0, 0, 0, 0, 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion2", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion2", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion2", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion2", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion2", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion2", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion2", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion2", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
	TNT1 A 3 A_SpawnItemEx ("RollingExplosion2", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	TNT1 AAAAAAA 5 A_SpawnItemEx ("RollingExplosion2", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
	stop
  }
}

ACTOR Knives : Ammo 16701
{
 Inventory.MaxAmount 11
 Ammo.BackpackAmount 0
 Ammo.BackpackMaxAmount 22
 Inventory.Icon "KNIFE"
 Inventory.PickupMessage "Throwing Knife"
 Inventory.PickupSound "KnifeUp"
 Scale 0.5
 +INVENTORY.ALWAYSPICKUP
 +INVENTORY.IGNORESKILL
 States
 {
	Spawn:
		TKNP A -1
		loop
 }
}

actor RollingExplosion4
{
  Radius 1
  Height 1
  Speed 0
  Obituary "%o didn't know the prop %g shot was loaded with C4."
  RenderStyle Translucent
  Alpha 0.9
  -SOLID
  +NOGRAVITY
  +NODAMAGETHRUST
  +FORCEXYBILLBOARD
  States
  {
  Spawn:
   FIR2 ABCDEFGH 2 BRIGHT A_Explode(2, 18, 1)
   FIR2 IJKLMN 2 BRIGHT
   stop
  }
}

ACTOR HangingMonitor 19992
{
	Game Doom
	Health 60
	Radius 16
	Height 68
	Mass 9999999
	Obituary "%o didn't know the Monitor %g shot was loaded with C4."
	+SOLID
	+NOGRAVITY
	+NOBLOOD
	+SHOOTABLE
	+SPAWNCEILING
	States
	{
	Spawn:
	  HMON ABC 6
	  Loop
	Death:
	  MISL B 0 A_Playsound("world/barrelx")
	  MISL B 0 bright A_Explode(16, 48, 0)
	  MISL B 0 A_NoGravity
	  MISL B 0 A_NoBlocking
	  TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris1", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(0, 5), Random(0, 5), Random(0, 5), Random(-360, 360), 128, 24)
	  TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris2", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(0, 5), Random(0, 5), Random(0, 5), Random(-360, 360), 128, 24)
	  TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris3", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(0, 5), Random(0, 5), Random(0, 5), Random(-360, 360), 128, 24)
	  TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris4", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(0, 5), Random(0, 5), Random(0, 5), Random(-360, 360), 128, 24)
	  TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("Debris5", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(0, 5), Random(0, 5), Random(0, 5), Random(-360, 360), 128, 24)
	  TNT1 A 3 A_SpawnItemEx ("RollingExplosion4", 0, 0, 0, 0, 0, 0, 0, 0, 0)
	  TNT1 AAAAAAAAA 3 A_SpawnItemEx ("RollingExplosion4", Random(-16, 16), Random(-16, 16), Random(0, 24), 0, 0, 0, Random(-360, 360), 0, 0)
	  TNT1 AAAAAAA 5 A_SpawnItemEx ("RollingExplosion4", Random(-16, 16), Random(-16, 16), Random(0, 24), 0, 0, 0, Random(-360, 360), 0, 0)
	  NULL A 6300
	  TNT1 A 0 A_SpawnItem("TeleportFog")
	  TNT1 A 0 A_SpawnItem("HangingMonitor")
	  stop
	}
}

ACTOR Tazer : Weapon Replaces Chainsaw
{
	Weapon.SelectionOrder 5700
	Weapon.Kickback 00
	Obituary "%o sez: Don't taze me %k!"
	Weapon.AmmoType "None"
	Weapon.AmmoType2 "None"
	Weapon.AmmoUse1 0
	Weapon.AmmoUse2 0
	Inventory.PickupMessage "Tazer"
	+WEAPON.WIMPY_WEAPON
	+WEAPON.MELEEWEAPON
	//+WEAPON.ALLOW_WITH_RESPAWN_INVUL
	Scale 0.5
	States
	{
	Ready:
		TAZE A 1 A_WeaponReady
		Loop
	Deselect:
		TAZE A 1 A_Lower
		TNT1 A 0 A_Lower
		TNT1 A 0 A_Lower
		Loop
	Select:
		TAZE A 1 A_Raise
		TNT1 A 0 A_Raise
		TNT1 A 0 A_Raise
		Loop
	Fire:
		TAZE BCDEF 2
		TAZE G 0 A_PlayWeaponSound("Tazer")
		TAZE G 0 A_Recoil(-1)
		TAZE GGGG 1 A_CustomPunch (3, 1, 0, "TazerZap", 126)
		TAZE G 2 A_CustomPunch (3, 1, 0, "TazerZap", 126)
		TAZE HIJ 2
		TAZE A 10
		TAZE A 0 A_ReFire
		Goto Ready
	Altfire:
		KNIF A 1 A_SelectWeapon("HuntingKnife")
		goto Ready
	Spawn:
		TAZP A -1
		loop
	}
}

actor TazerZap
{
  renderstyle Add
  alpha 0.9
  +NOBLOCKMAP
  +NOGRAVITY
  -ALLOWPARTICLES
  +PUFFONACTORS
  DamageType Taze
  States
  {
  Spawn:
   TZOT ABCD 1 BRIGHT
   stop
  }
}

Actor BodyArmor1 : BasicArmorPickup // Replaces BlueArmor
{
	Game Doom
	SpawnID 69
	Radius 20
	Height 16
	Scale 0.85
	Inventory.Pickupmessage "Body Armor"
	Inventory.Icon "ARM2A0"
	Armor.Savepercent 99.9999
	Armor.Saveamount 100
	States
	{
	Spawn:
		ARM2 A -1
		loop
	}
}

actor BodyArmorPickup : CustomInventory Replaces BlueArmor
{
  Radius 20
  Height 16
  Scale 0.85
  inventory.pickupmessage "Body Armor"
  inventory.pickupsound "misc/armor_pkup"
  +INVENTORY.AUTOACTIVATE
  states
  {
  Spawn:
	ARM2 A -1
	loop
  Use:
  	TNT1 A 0 A_GiveInventory("DamageDummy", 1)
  	stop
  Pickup:
    TNT1 A 0 A_GiveInventory("BodyArmor1", 1)
    stop
  }
}

actor StimpackPickup : CustomInventory Replaces Stimpack
{
  inventory.pickupmessage "Health Boost +10"
  Inventory.PickupSound "misc/health_pkup"
  +INVENTORY.AUTOACTIVATE
  states
  {
  Spawn:
	STIM A -1
	loop
  Use:
  	TNT1 A 0 A_GiveInventory("DamageDummy", 1)
  	stop
  Pickup:
    TNT1 A 0 A_GiveInventory("Health", 10)
    stop
  }
}

actor MedikitPickup : CustomInventory Replaces Medikit
{
  inventory.pickupmessage "Health Boost +20"
  Inventory.PickupSound "misc/health_pkup"
  +INVENTORY.AUTOACTIVATE
  states
  {
  Spawn:
	MEDI A -1
	loop
  Use:
  	TNT1 A 0 A_GiveInventory("DamageDummy", 1)
  	stop
  Pickup:
    TNT1 A 0 A_GiveInventory("Health", 20)
    stop
  }
}

// *************************************************


actor ThrownKnife
{
 Projectile
 Radius 8
 Height 8
 Damage (75)
 Speed 42
 Scale 0.5
 Obituary "%o gets a throwing knife up %p ass by %k."
 BounceCount 3
 SeeSound "KnifeBounce"
 +HEXENBOUNCE
 +BLOODSPLATTER
 -BLOODLESSIMPACT
 States
 {
 Spawn:
  TKNI A 0
  TKNI A 0 A_StopSound
  TKNI A 0 Thing_ChangeTID(0, 255)
  TKNI ABCD 2
  TKNI EFGH 2 A_Gravity
  TKNI A 0 A_PlaySound("KnifeSwing")
  TKNI A 0
  goto Spawn+3
 Death:
  TNT1 A 0
  TNT1 A 0 A_SpawnItem("HuntingKnife", 8)
  stop
 XDeath:
  TNT1 A 0
  TNT1 A 0 A_PlaySound("FleshHit")
  TNT1 A 0 A_SpawnItem("Knives", 8)
  stop
 }
}

actor BulletSmoke
{
  Projectile
  Radius 1
  Height 1
  Damage 0
  Speed 0
  Scale 0.06
  RenderStyle Add
  Alpha 0.8
  +NOCLIP
  States
  {
   Spawn:
   SMOK A 0
   SMOK A 0 ThrustThingZ(0, 1, 0, 0)
   SMOK ABCDEFGHIJKLMNOPQ 2
   stop
  }
}

actor BulletSmoke2 : BulletSmoke
{
  Alpha 0.2
  States
  {
   Spawn:
   SMOK ABCDEFGHIJKLMNOPQ 3
   stop
  }
}

actor GEBlood : Blood Replaces Blood
{
  States
  {
  Spawn:
   TNT1 AAA 0
   TNT1 A 0 A_PlaySound("FleshHit")
   TNT1 AA 0 A_SpawnItemEx("Bloodsplatter", 0, 0, 0, Random(-2,2), Random(-2,2), Random(-1,1), Random(-360, 360), 129, 0)
   TNT1 AA 1
   stop
  }
}

actor BloodSplatterTrail
{
 Radius 1
 Height 1
 Speed 0
 RenderStyle Translucent
 Alpha 0.9
 Scale 0.3
 +NOCLIP
 States
 {
  Spawn:
   BLUD CBA 2
   stop
 }
}

actor Bloodsplatterscaled : Bloodsplatter Replaces BloodSplatter
{
 Scale 0.5
 RenderStyle Translucent
 Alpha 0.9
 +CORPSE
 +NOCLIP
 -NOGRAVITY
 States
 {
  Spawn:
   BLUD C 0
   BLUD CCCC 1 A_SpawnItemEx("BloodsplatterTrail", 0, 0, 0, 0, 0, 0, 0, 129, 0)
   BLUD BBBB 1 A_SpawnItemEx("BloodsplatterTrail", 0, 0, 0, 0, 0, 0, 0, 129, 0)
   BLUD AAAA 1 A_SpawnItemEx("BloodsplatterTrail", 0, 0, 0, 0, 0, 0, 0, 129, 0)
   stop
  Crash:
   BLUD E 0 A_SpawnItemEx("BloodsplatterPool", 0, 0, 0, 0, 0, 0, 0, 129, 0)
   stop
 }
}

actor BloodSplatterPool
{
 Radius 1
 Height 1
 Speed 0
 RenderStyle Translucent
 Alpha 0.7
 Scale 0.4
 +NOCLIP
 States
 {
  Spawn:
   BLUD E 700
   BLUD E 5 A_FadeOut
   goto Spawn+1
 }
}

ACTOR PointedBullets : Ammo 16532
{
 Inventory.PickupMessage "Picked up some Pointed Bullets."
 Inventory.Amount 30
 Inventory.MaxAmount 200
 Ammo.BackpackAmount 0
 Ammo.BackpackMaxAmount 400
 Inventory.Icon ICONBULL
 States
 {
 Spawn:
  PAMO A -1
  loop
 }
}

actor ForestTree1 11100
{
height 128
radius 16
+SOLID
States
{
Spawn:
1TRE A -1
loop
}
}

actor BigSatellite 19731
{
height 156
radius 128
Scale 3.0
+SOLID
States
{
Spawn:
SATT A -1
loop
}
}


ACTOR CycloneCell : Ammo 16552
{
 Inventory.PickupMessage "Picked up some Cyclone Cells."
 Inventory.Amount 50
 Inventory.MaxAmount 200
 Ammo.BackpackAmount 0
 Ammo.BackpackMaxAmount 400
 Scale 0.6
 Inventory.Icon ICONBULL
 States
 {
 Spawn:
  CCEL A -1
  loop
 }
}

actor CyclonePlasma : FastProjectile
{
 Projectile
 Speed 140
 Damage (12)
 Radius 2
 Height 2
 Scale 0.4
 RenderStyle Add
 Alpha 1.0
 SeeSound "CycloneFire"
 States
 {
 Spawn:
  TPLA A 1 BRIGHT //A_SpawnItemEX("CyclonePlasmaTrail", 0, 0, 0, 0, 0, 0, 0, 128, 0)
  loop
 Crash:
 Death:
  TPLA BB 0 BRIGHT A_SpawnItemEX("CycloneSpark", 0, 0, 0, Random(-3,3), Random(-3,3), Random(-6,6), 0, 128, 0)
  TPLA BCD 2 BRIGHT A_SpawnItemEX("CycloneSpark", 0, 0, 0, Random(-3,3), Random(-3,3), Random(-6,6), 0, 128, 0)
  stop
 XDeath:
  TNT1 AA 0 BRIGHT A_SpawnItemEX("CycloneSpark", 0, 0, 0, Random(-3,3), Random(-3,3), Random(-6,6), 0, 128, 0)
  TNT1 A 0 A_SpawnItemEx("GEBlood", 0, 0, 0, 0, 0, 0, 0, 128, 0)
  TNT1 AAA 2 BRIGHT A_SpawnItemEX("CycloneSpark", 0, 0, 0, Random(-3,3), Random(-3,3), Random(-6,6), 0, 128, 0)
  stop
 }
}

actor CyclonePlasmaTrail
{
  Radius 1
  Height 1
  Speed 0
  Scale 0.4
  RenderStyle Add
  +NOCLIP
  +NOGRAVITY
  +DONTSPLASH
  States
  {
  Spawn:
	TPLA AA 0 BRIGHT A_FadeOut
	TPLA A 1 BRIGHT A_FadeOut
	loop
  Death:
   TNT1 A 1
   stop
  }
}

actor CycloneSpark
{
  Projectile
  Radius 1
  Height 1
  Speed 0
  Scale 0.1
  RenderStyle Add
  ReactionTime 10
  -NOGRAVITY
  +HEXENBOUNCE
  +DONTSPLASH
  States
  {
  Spawn:
	TPLA A 1 BRIGHT A_CountDown
	TPLA A 0 BRIGHT A_SpawnItemEX("CycloneSparkTrail", 0, 0, 0, 0, 0, 0, 0, 128, 0)
	loop
  Death:
   TPLA A 1 A_Fadeout
   loop
  }
}

actor CycloneSparkTrail
{
  Radius 1
  Height 1
  Speed 0
  Scale 0.1
  RenderStyle Add
  +NOCLIP
  +NOGRAVITY
  +DONTSPLASH
  States
  {
  Spawn:
	TPLA A 0 BRIGHT A_FadeOut
	TPLA A 1 BRIGHT A_FadeOut
	loop
  Death:
   TNT1 A 1
   stop
  }
}

ACTOR Snow
{
	Radius 1
	Height 1
	Speed 0
	Damage 0
	Gravity 0.07
	+NOBLOCKMAP
	+DROPOFF
	+MISSILE
	+NOTELEPORT
	+ACTIVATEIMPACT
	+ACTIVATEPCROSS
	+DONTSPLASH
	+FORCEXYBILLBOARD
	+CLIENTSIDEONLY
	States
	{
	Spawn:
		SNOW A 1
		Loop
	Death:
		TNT1 A 1
		Stop
	}
}

actor Snowing1536 16000
{
	Radius 1536
	Height 1
	Speed 0
	Mass 9999999
	+SPAWNCEILING
	+NOGRAVITY
	+CORPSE
	States
	{
	Spawn:
		TNT1 A 1 A_SpawnItemEX("Snow", Random(-484,484), Random(-484,484), 0, Random(-2,2), Random(-2,2), 0, Random(-360,360), 128, 0)
		Loop
	}
}

actor Teleparticle
{
 Projectile
 Radius 1
 Height 1
 Damage 0
 Speed 0
 Renderstyle Add
 Alpha 0.8
 +NOCLIP
 States
 {
  Spawn:
   TELE ABC 5 BRIGHT
   stop
  Death:
   TNT1 A 1
   stop
 }
}

actor TeleportNew : TeleportFog Replaces TelePortFog
{
 States
 {
 Spawn:
  TNT1 AAAAAAAAAAAAAAAAAAAAAAAA 1 A_SpawnItemEx ("Teleparticle", Random(-24, 24), Random(-24, 24), Random(-8, 32), 0, 0, Random(2,4), 0, 128, 0)
  stop
 }
}

ACTOR ExplodingChair 19993
{
	Game Doom
	Health 60
	Radius 16
	Height 32
	Mass 9999999
	Obituary "%o didn't know the Chair %g shot was loaded with C4."
	+SOLID
	+NOBLOOD
	+SHOOTABLE
	+NOTAUTOAIMED
	States
	{
	Spawn:
	  CHAI A -1
	  Loop
	Death:
	  CHAI B 0 A_Playsound("world/barrelx")
	  CHAI B 0 bright A_Explode(16, 48, 0)
	  CHAI B 0 A_NoGravity
	  CHAI B 0 A_NoBlocking
	  CHAI BBBBBBBBBBBB 0 A_SpawnItemEx("Debris1", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(0, 5), Random(0, 5), Random(0, 5), Random(-360, 360), 128, 24)
	  CHAI BBBBBBBBBBBB 0 A_SpawnItemEx("Debris2", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(0, 5), Random(0, 5), Random(0, 5), Random(-360, 360), 128, 24)
	  CHAI BBBBBBBBBBBB 0 A_SpawnItemEx("Debris3", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(0, 5), Random(0, 5), Random(0, 5), Random(-360, 360), 128, 24)
	  CHAI BBBBBBBBBBBB 0 A_SpawnItemEx("Debris4", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(0, 5), Random(0, 5), Random(0, 5), Random(-360, 360), 128, 24)
	  CHAI BBBBBBBBBBBB 0 A_SpawnItemEx("Debris5", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(0, 5), Random(0, 5), Random(0, 5), Random(-360, 360), 128, 24)
	  CHAI B 3 A_SpawnItemEx ("RollingExplosion4", 0, 0, 0, 0, 0, 0, 0, 0, 0)
	  CHAI BBBBBBBBB 3 A_SpawnItemEx ("RollingExplosion4", Random(-16, 16), Random(-16, 16), Random(0, 24), 0, 0, 0, Random(-360, 360), 0, 0)
	  CHAI BBBBBBB 5 A_SpawnItemEx ("RollingExplosion4", Random(-16, 16), Random(-16, 16), Random(0, 24), 0, 0, 0, Random(-360, 360), 0, 0)
	  CHAI B 6300
	  NULL A 0 A_SpawnItem("TeleportFog")
	  NULL A 0 A_SpawnItem("ExplodingChair")
	  stop
	}
}

actor GlassSpawner 15432
{
	Radius 1
	Height 1
	Health 1000
	Speed 0
	+NOCLIP
	+NOGRAVITY
	var int user_hits;
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 0 A_SetUserVar("user_hits", 3)
			TNT1 A 0 ACS_NamedExecuteAlways("SET_GLASS", 0, tid)
			goto WaitForBreakage
		WaitForBreakage:
			TNT1 A -1
			loop
		Shatter:
			TNT1 A 0 A_PlaySound("GlassBreak", CHAN_AUTO)
			TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("BrokenGlass", frandom(-8.0, 8.0), frandom(-8.0, 8.0), frandom(-8.0, 8.0), frandom(-3.0, 3.0), frandom(-3.0, 3.0), frandom(-3.0, 8.0), 0, 128, 0)
			TNT1 A 2100
			goto Spawn 
	}
}

actor BrokenGlass
{
 Radius 1
 Height 1
 Projectile
 Speed 0
 ReactionTime 96
 Gravity 0.8
 Scale 0.4
 RenderStyle Translucent
 Alpha 0.5
 BounceCount 6
 BounceFactor 0.7
 -NOGRAVITY
 +HEXENBOUNCE
 -ACTIVATEMCROSS
 -ACTIVATEPCROSS
 -ACTIVATEIMPACT
 States
 {
  Spawn:
   TNT1 A 0
   GLSH A 0 A_Jump(127, "Spawn2", "Spawn3")
   GLSH A 1 A_CountDown
   goto Spawn+2
  Spawn2:
   GLSH B 1 A_CountDown
   loop
  Spawn3:
   GLSH C 1 A_CountDown
   loop
  Death:
   GLSH B 1 A_FadeOut(0.01)
   loop
 }
}

actor ProxMines : Ammo
{
	scale 0.3
	radius 16
	height 8
	inventory.pickupmessage "Picked up a Proximity Mine"
	inventory.icon "PROXMINE"
	inventory.amount 1
	inventory.maxamount 11
	ammo.backpackamount 3
	ammo.backpackmaxamount 22
	+FLOATBOB
	states
	{
		Spawn:
			MINE A -1
			stop
	}
}

// Prox Mine Code: Thanks goes the SMII team for
// Improving on my original prox mine code. :)
// Modified to suit Goldeneye 007's Prox mine behavior.

actor ProxExplosion
{
  Radius 1
  Height 1
  Speed 0
  Scale 1.25
  obituary "%o couldn't get away from %k's mine soon enough."
  RenderStyle Translucent
  Alpha 0.9
  -SOLID
  +NOGRAVITY
  +NODAMAGETHRUST
  +FORCERADIUSDMG
  +FORCEXYBILLBOARD
  States
  {
  Spawn:
   FIR2 ABCDEFGH 2 BRIGHT A_Explode(10, 76, 1)
   FIR2 IJKLMN 2 BRIGHT
   stop
  }
}

actor ProxDetector
{
	radius 5
	height 2
	health 1
	damage 22
	speed 0
	scale 0.3
	mass 9999999
	obituary "%o didn't see %k's proximity mine."
	meleerange 128
	+DOOMBOUNCE
	+NOBLOOD
	+MISSILE
	+NOGRAVITY
	+GHOST
	+THRUGHOST
	+LOOKALLAROUND
	+SHOOTABLE
	+NOCLIP
	+NOTARGET
	states
	{
		Spawn:
			TNT1 A 0
			TNT1 A 1 A_Look
			loop
		See:
			TNT1 A 1 A_Chase
			TNT1 A 0 A_JumpIfCloser(128, 3)
			TNT1 A 0 A_Look
			loop
			TNT1 A 2 A_Explode(40, 10, 1)
			stop
		Melee:
			TNT1 A 0 A_Explode(40, 10, 1)
			stop
		Death:
			TNT1 A 1 A_Explode(999, 10, 1)
			stop
	}
}

actor ProxProj
{
	radius 8
	height 8
	health 5
	damage 22
	speed 0
	scale 0.3
	mass 9999999
	obituary "%o didn't see %k's proximity mine."
	+HEXENBOUNCE
	+NOBLOOD
	+SHOOTABLE
	-NOGRAVITY
	+LOOKALLAROUND
	+NOTARGET
	+BOUNCEONACTORS
	+GHOST
	+THRUGHOST
	+NOCLIP
	+MISSILE
	bouncefactor 0
	states
	{
		Spawn:
			PROX A 0
			PROX A 1
			PROX A 0 A_CheckFloor("SpawnFloor")
			PROX A 0 A_NoGravity
			PROX A 0 A_Stop
			PROX A 16
			PROX A 0 A_SpawnItem("ProxDetector", 0, 0, 1)
			PROX A 1
			goto Spawn+7
		SpawnFloor:
			PROX B 16
			PROX B 0 A_SpawnItem("ProxDetector", 0, 0, 1)
			PROX B 1
			goto SpawnFloor+2
		Death:
			PROX A 0 A_NoGravity
			PROX A 0 A_CheckFloor("FloorDeath")
			PROX A 14 A_PlaySound("ProxBeep")
			TNT1 A 0 bright A_PlaySound("world/barrelx")
			TNT1 A 0 bright A_Explode(64, 128, 1)
			TNT1 A 0 A_NoGravity
			TNT1 A 3 A_SpawnItemEx ("ProxExplosion", 0, 0, 0, 0, 0, 0, 0, 0, 0)
			TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
			TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
			TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
			TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
			TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
			TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
			TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
			TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
			TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
			TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
			TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
			TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
			TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
			TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
			TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
			TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
			TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
			TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
			TNT1 AAAAAAA 5 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
			stop
		FloorDeath:
			PROX B 10 A_PlaySound("ProxBeep")
			goto Death+3
	}
}

actor ProxProj3 : ProxProj
{
 States
 {
		Spawn:
			PROX A 1 A_CheckFloor("SpawnFloor")
			goto Spawn
		SpawnFloor:
			PROX B 16 A_PlaySound("ProxHit")
			PROX B 0 A_SpawnItem("ProxDetector", 0, 0, 1)
			PROX B 1
			goto SpawnFloor+2
 }
}

actor ProxProj2
{
	radius 5
	height 5
	damage 0
	speed 24
	scale 0.3
	obituary "%o didn't see %k's proximity mine."
	SeeSound "ProxThrow"
	+MISSILE
	+THRUGHOST
	+GHOST
	+CORPSE
	+DROPOFF
	+NOBLOCKMAP
	+NOTARGET
	states
	{
		Spawn:
			PROX A 0
			PROX A 0 A_Gravity
			PROX A 0 ThrustThingZ(0, 30, 0, 1)
			PROX AB 1
			goto Spawn+3
		XDeath:
			PROX A 0 A_PlaySound("weapons/grbnce")
			PROX A 0 A_ScreamAndUnblock
			PROX A 0 A_SpawnItem("ProxProj3", 0, 1)
			TNT1 A 1
			stop
		Death:
			PROX A 0 A_PlaySound("Proxhit")
			PROX A 0 A_ScreamAndUnblock
			PROX A 0 A_SpawnItem("ProxProj", 0, 1)
			TNT1 A 1
			stop
	}
}

actor ProximityMines : Weapon
{
  Obituary "%o didn't see %k's proximity mine."
  Weapon.Ammotype1 "ProxMines"
  Weapon.UpSound "ProxBeep"
  Inventory.Pickupmessage "Picked up a proximity mine"
  Weapon.Selectionorder 900
  Weapon.AmmoUse1 1
  Weapon.AmmoGive1 1
  Scale 0.3
  +WEAPON.NOAUTOFIRE
  +WEAPON.NOAUTOAIM
  +FLOATBOB
  States
  {
	Spawn:
		MINE A -1
		stop
	Select:
		TNT1 A 1 A_Raise
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
		loop
	Deselect:
		TNT1 A 1 A_Lower
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
		loop
	Ready:
		TNT1 A 1 A_WeaponReady
		loop
	Fire:
		TNT1 A 30 A_FireCustomMissile("ProxProj2", 0, 1, 5, 0, 0)
		TNT1 A 0 A_Refire
		goto Ready
  }
}

ACTOR ProxPickup : Custominventory 25375
{
   Scale 0.3
   inventory.respawntics 1750
   inventory.pickupmessage "Picked up a Proximity Mine"
   inventory.pickupsound "ProxBeep"
   +COUNTITEM
   +FLOATBOB
   States
   {
   Spawn:
	  MINE A -1
	  loop
   Pickup:
	  TNT1 A 0 A_GiveInventory("ProximityMines")
	  stop
   }
}

ACTOR RemoteMine
{
	PROJECTILE
	+SHOOTABLE
	+GHOST
	+NOBLOOD
	+EXTREMEDEATH
	+SEEKERMISSILE
	+THRUGHOST
	-NOBLOCKMAP
	-NOLIFTDROP
	-NOGRAVITY
	-ACTIVATEIMPACT
	-ACTIVATEPCROSS
	-ACTIVATEMCROSS
	mass 9999999
	SpawnID 234
	Obituary "%k detonated a remote mine in %o's face."
	Health 5
	Damage 0
	Speed 24
	Scale 0.3
	Radius 6
	Height 6
	SeeSound "ProxThrow"
	Renderstyle Normal
	States
	{
	Spawn:
	  RMIN A 0
	  RMIN A 0
	  RMIN A 0 ThrustThingZ(0, 30, 0, 1)
	  RMIN A 0 A_UnSetShootable
	  RMIN AB 1
	  goto Spawn+4
	Death:
	  RMIN A 0 A_PlaySound("Proxhit")
	  RMIN A 0 A_SetShootable
	  RMIN A 0 A_CheckFloor("FloorDeath")
	  RMIN A 0 A_NoGravity
	  RMIN A 2 A_JumpIfInTargetInventory("Detonator", 1, "Detonate")
	  RMIN A 0 A_JumpIfHealthLower(1, "BlowUp")
	  goto Death+4
	FloorDeath:
	  RMIN B 0 A_Gravity
	  RMIN B 2 A_JumpIfInTargetInventory("Detonator", 1, "Detonate")
	  RMIN B 0 A_JumpIfHealthLower(1, "BlowUp")
	  goto FloorDeath+1
	XDeath:
	  RMIN A 0
	  RMIN A 0 A_Gravity
	  RMIN A 0 A_SetShootable
	  RMIN A 0 A_PlaySound("weapons/grbnce")
	  RMIN A 1
	  RMIN A 0 A_CheckFloor("FloorDeath")
	  RMIN A 0 A_JumpIfHealthLower(1, "BlowUp")
	  goto XDeath+4
	Detonate:
		RMIN A 0 A_UnSetShootable
		RMIN A 0 A_UnsetSolid
		RMIN A 0 A_CheckFloor("FloorDetonate")
		RMIN A 0 A_NoGravity
		RMIN A 4 A_PlaySound("ProxBeep")
		RMIN A 4 A_Jump(127, 1)
		RMIN A 4
		TNT1 A 0 bright A_PlaySound("world/barrelx")
		TNT1 A 0 bright A_Explode(72, 128, 1)
		TNT1 A 0 A_NoGravity
		TNT1 A 0 Thing_ChangeTID(0, 0)
		TNT1 A 3 A_SpawnItemEx ("ProxExplosion", 0, 0, 0, 0, 0, 0, 0, 0, 0)
		TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
		TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
		TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
		TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
		TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
		TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
		TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
		TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
		TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
		TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
		TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
		TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
		TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
		TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
		TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
		TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
		TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
		TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
		TNT1 AAAAAAA 5 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
		stop
	BlowUp:
		RMIN A 0 A_Fall
		RMIN A 0 A_UnsetSolid
		RMIN A 0 A_NoGravity
		RMIN A 0 A_Stop
		TNT1 A 0 bright A_PlaySound("world/barrelx")
		TNT1 A 0 bright A_Explode(72, 128, 1)
		TNT1 A 0 A_NoGravity
		TNT1 A 0 Thing_ChangeTID(0, 0)
		TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
		TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
		TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
		TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
		TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
		TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
		TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
		TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
		TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
		TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
		TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
		TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
		TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
		TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
		TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
		TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
		TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
		TNT1 A 0 A_SpawnItemEx ("ExplosionSmoke2", Random(-44, 44), Random(-44, 44), Random(0, 38), 0, 0, 0, 0, 128, 0)
		TNT1 A 3 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
		TNT1 AAAAAAA 5 A_SpawnItemEx ("ProxExplosion", Random(-24, 24), Random(-24, 24), Random(0, 38), 0, 0, 0, Random(-360, 360), 0, 0)
		stop
	FloorDetonate:
		RMIN B 4 A_PlaySound("ProxBeep")
		RMIN B 4 A_Jump(127, 1)
		RMIN B 4
		goto Detonate+7
	}
}

actor RemoMines : Ammo
{
	scale 0.3
	radius 16
	height 8
	inventory.pickupmessage "Picked up a Remote Mine"
	inventory.icon "REMOMINE"
	inventory.amount 1
	inventory.maxamount 11
	ammo.backpackamount 3
	ammo.backpackmaxamount 22
	+FLOATBOB
	states
	{
		Spawn:
			RMIP A -1
			stop
	}
}

actor RemoteMines : Weapon
{
  Obituary "%k detonated a remote mine in %o's face."
  Weapon.Ammotype1 "RemoMines"
  Weapon.UpSound "ProxBeep"
  Inventory.Pickupmessage "Picked up a remote mine"
  Weapon.Selectionorder 910
  Weapon.AmmoUse1 1
  Weapon.AmmoGive1 1
  Scale 0.3
  +WEAPON.NOAUTOFIRE
  +WEAPON.AMMO_OPTIONAL
  +WEAPON.NOAUTOAIM
  +FLOATBOB
  States
  {
	Spawn:
		RMIP A -1
		stop
	Select:
		TNT1 A 1 A_Raise
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
		loop
	Deselect:
		TNT1 A 1 A_Lower
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
		loop
	Ready:
		TNT1 A 1 A_WeaponReady
		loop
	Fire:
		TNT1 A 0 A_JumpIfNoAmmo("AltFire")
		TNT1 A 1 A_FireCustomMissile("RemoteMine", 0, 1, 5, 0, 0)
		TNT1 A 29
		TNT1 A 0 A_Refire
		goto Ready
	AltFire:
		TNT1 A 1
		DETO ABCD 1
		DETO E 5
		DETO F 0 A_PlayWeaponSound("RemoteButton")
		DETO F 0 A_GiveInventory("Detonator", 1)
		DETO F 5
		DETO E 5
		DETO DCBA 1
		TNT1 A 10 A_TakeInventory("Detonator", 999)
		TNT1 A 0 A_Refire
		goto Ready
  }
}

ACTOR RemotePickup : Custominventory 25376
{
   Scale 0.3
   inventory.respawntics 1750
   inventory.pickupmessage "Picked up a Remote Mine"
   inventory.pickupsound "ProxBeep"
   +COUNTITEM
   +FLOATBOB
   States
   {
   Spawn:
	  RMIP A -1
	  loop
   Pickup:
	  TNT1 A 0 A_GiveInventory("RemoteMines")
	  stop
   }
}

